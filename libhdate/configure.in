AC_INIT(src/hdate.h)

dnl Set release number
PACKAGE=libhdate
VERSION=0.19

AM_INIT_AUTOMAKE($PACKAGE, $VERSION)
AM_MAINTAINER_MODE

dnl Checks for programs.
AC_ISC_POSIX
AC_PROG_CC
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_MAKE_SET
AC_STDC_HEADERS
AM_PROG_LIBTOOL

AM_MAINTAINER_MODE

AC_C_CONST

AC_PATH_PROG(PKG_CONFIG, pkg-config, no)

CFLAGS=
LIBS=-lm

dnl =======================================================================================

dnl gettext

dnl Languages which your application supports
ALL_LINGUAS="he"
AM_GNU_GETTEXT
AM_GNU_GETTEXT_VERSION(0.10.40)

dnl Set PACKAGE_LOCALE_DIR in config.h.
if test "x${prefix}" = "xNONE"; then
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${ac_default_prefix}/${DATADIRNAME}/locale")
else
  AC_DEFINE_UNQUOTED(PACKAGE_LOCALE_DIR, "${prefix}/${DATADIRNAME}/locale")
fi

dnl =======================================================================================

build_examples=no

AC_ARG_ENABLE(examples, [  --disable-examples     build examples [default=no]], build_examples="$enableval", build_examples=no)

AM_CONDITIONAL(WITH_EXAMPLES, test "x$build_examples" = "xyes")

build_hcal=yes

AC_ARG_ENABLE(hcal, [  --disable-hcal     build hcal/hdate [default=yes]], build_hcal="$enableval", build_hcal=yes)

AM_CONDITIONAL(WITH_HCAL, test "x$build_hcal" = "xyes")

dnl =======================================================================================

AC_SUBST(CFLAGS)
AC_SUBST(LIBS)

dnl =======================================================================================

AC_OUTPUT([
Makefile
libhdate.spec
libhdate.pc
intl/Makefile
po/Makefile.in
src/Makefile
examples/Makefile
examples/hcal/Makefile
examples/ical/Makefile
examples/html/Makefile
])

dnl ===========================================================================================
echo "
$PACKAGE-$VERSION

	prefix:                         ${prefix}
	compiler:                       ${CC}
	
	build hcal			${build_hcal}
	build examples			${build_examples}
"
